(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d210688"],{b884:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),a("pre",{staticClass:"hljs"},[a("span",{staticClass:"hljs-lang",on:{click:t.ctrlC}},[a("em",[t._v("js")]),t._v("/复制代码")]),t._m(12)]),a("p",[t._v("####　Pragma cache-control expires")]),a("pre",{staticClass:"hljs"},[a("span",{staticClass:"hljs-lang",on:{click:t.ctrlC}},[t._v("复制代码")]),a("code",[t._v("优先级\npragma(包含expires)[HTTP1]\ncache-control[HTTP1.1]\n")])]),t._m(13),t._m(14)])},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{attrs:{id:"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98"}}),t._v(" 浏览器缓存")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("blockquote",[a("p",[t._v("在开发过程中可能会遇到打包部署后发现内容没有更新那就和浏览器缓存有请看关了下面配置")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{attrs:{id:"cache%E7%BC%93%E5%AD%98%E7%8A%B6%E6%80%81%E7%A0%81"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cache%E7%BC%93%E5%AD%98%E7%8A%B6%E6%80%81%E7%A0%81"}}),t._v(" cache缓存状态码")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",[a("thead",[a("tr",[a("th",[t._v("状态码")]),a("th",[t._v("描述")])])]),a("tbody",[a("tr",[a("td",[t._v("200(from meomory cache)")]),a("td",[t._v("状态安为灰色不去请求服务器，直接获取内存资源，属于强制缓存")])]),a("tr",[a("td",[t._v("200(from disk cache)")]),a("td",[t._v("状态安为灰色不去请求服务器，直接获取磁盘资源，属于强制缓存")])]),a("tr",[a("td",[t._v("200")]),a("td",[t._v("请求服务器，获取资源")])]),a("tr",[a("td",[t._v("304(from disk cache)")]),a("td",[t._v("第一次请求request会返回if-None-Match，下次请求reposon携带Etag服务器会判断资源是否更新，未更新返回304")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{attrs:{id:"%E5%BC%BA%E5%88%B6%E7%BC%93%E5%AD%98%2F%E5%8D%8F%E5%95%86%E7%BC%93%E5%AD%98"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#%E5%BC%BA%E5%88%B6%E7%BC%93%E5%AD%98%2F%E5%8D%8F%E5%95%86%E7%BC%93%E5%AD%98"}}),t._v(" 强制缓存/协商缓存")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("blockquote",[a("p",[t._v("强制缓存就是，用户第一次访问页面之后，浏览器将数据存在缓存中，在过期时间之内，都不会再请求服务器。是否使用强制缓存在于资源是否过期，该过期时间从第一次请求的服务器响应头中获取。如果在过期时间内，从缓存中读取，如果超出过期时间，则使用协商缓存（下面会讲）。")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{attrs:{id:"expires(http1)%E5%92%8Ccache-control(http1.1)-%E5%85%B6%E4%B8%ADcache-control%E4%BC%98%E5%85%88%E7%BA%A7%E6%AF%94expires%E9%AB%98%E3%80%82"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#expires(http1)%E5%92%8Ccache-control(http1.1)-%E5%85%B6%E4%B8%ADcache-control%E4%BC%98%E5%85%88%E7%BA%A7%E6%AF%94expires%E9%AB%98%E3%80%82"}}),t._v(" Expires(http1)和Cache-Control(http1.1) 其中Cache-Control优先级比Expires高。")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("blockquote",[a("p",[t._v("协商缓存，从字面意思，就是要协商，是浏览器和服务器协商，那么浏览器每次都要和服务器通信。在第一次请求服务器时，服务器会返回资源，并且返回一个资源的缓存标识，一起存到浏览器的缓存数据库。当第二次请求资源时，浏览器会首先将缓存标识发送给服务器，服务器拿到标识后判断标识是否匹配，如果不匹配，表示资源有更新，服务器会将新数据和新的缓存标识一起返回到浏览器；如果缓存标识匹配，表示资源没有更新，并且返回 304 状态码，浏览器就读取本地缓存服务器中的数据。")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{attrs:{id:"etag%2Fif-none-match-last-modified%2Fif-modified-since"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etag%2Fif-none-match-last-modified%2Fif-modified-since"}}),t._v(" Etag/if-None-Match  Last-Modified/IF-Modified-Since")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{attrs:{id:"no-cache-no-store"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#no-cache-no-store"}}),t._v(" no-cache no-store")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("blockquote",[a("p",[t._v("no-cache就是不缓存，但是no-cache并不是不缓存，而是使用协商缓存，所以并不能禁止缓存，\nno-store才是真正的禁止缓存。从节省带宽角度讲，\n使用no-cache更优一点，文件未发生改变时只传输很小的报文大小，只有在文件改变时才会传输整个文件大小。而不是no-store不管什么情况都传输整个文件大小。")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{attrs:{id:"%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E5%8D%8F%E5%95%86%E7%BC%93%E5%AD%98"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E5%8D%8F%E5%95%86%E7%BC%93%E5%AD%98"}}),t._v(" 如何设置协商缓存")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("code",[t._v("location ~ .*\\.(html)$ {  "),a("span",{staticClass:"hljs-comment"},[t._v("// 对html文件限制缓存")]),t._v("\n\n    add_header Cache-Control no-store;  "),a("span",{staticClass:"hljs-comment"},[t._v("// 不缓存")]),t._v("\n\n    "),a("span",{staticClass:"hljs-comment"},[t._v("// 或者用add_header Cache-Control no-cache;替代上面那一句，协商缓存")]),t._v("\n\n    add_header Pragma no-cache;\n\n}\n")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{attrs:{id:"cache-control-%E4%BB%8B%E7%BB%8D"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cache-control-%E4%BB%8B%E7%BB%8D"}}),t._v(" cache-control 介绍")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",[a("thead",[a("tr",[a("th",[t._v("Cache-directive")]),a("th",[t._v("说明")])])]),a("tbody",[a("tr",[a("td",[t._v("public")]),a("td",[t._v("所有内容都将被缓存(客户端和代理服务器都可缓存)")])]),a("tr",[a("td",[t._v("private")]),a("td",[t._v("内容只缓存到私有缓存中(仅客户端可以缓存，代理服务器不可缓存)")])]),a("tr",[a("td",[t._v("no-cache")]),a("td",[t._v("必须先与服务器确认返回的响应是否被更改，然后才能使用该响应来满足后续对同一个网址的请求。因此，如果存在合适的验证令牌 (ETag)，no-cache 会发起往返通信来验证缓存的响应，如果资源未被更改，可以避免下载")])]),a("tr",[a("td",[t._v("no-store")]),a("td",[t._v("所有内容都不会被缓存到缓存或 Internet 临时文件中")])]),a("tr",[a("td",[t._v("must-revalidation/proxy-revalidation")]),a("td",[t._v("如果缓存的内容失效，请求必须发送到服务器/代理以进行重新验证")])]),a("tr",[a("td",[t._v("max-age=xxx (xxx is numeric)")]),a("td",[t._v("缓存的内容将在 xxx 秒后失效, 这个选项只在HTTP 1.1可用, 并如果和Last-Modified一起使用时, 优先级较高")])]),a("tr",[a("td"),a("td")])])])}],n=a("c701"),s={},o=Object(n["a"])(s,r,c,!1,null,null,null);e["default"]=o.exports}}]);